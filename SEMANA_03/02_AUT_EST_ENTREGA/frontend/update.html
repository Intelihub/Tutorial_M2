<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <meta name="viewport" content="width=device-width"/>
    <title>CRUD</title>
</head>
<h1>Atualizar Formação</h1>

<form name="form1" method="post" action="/atualizaFormacao">
    <input id="id" type="text" name="id" value="" style="display: none">
    Nome: <input id="name" type="text" name="name" value="" required>
    <br>
    Ano de Início: <input id="start_year" type="number" name="start_year" value="" required>
    <br>
    Ano de Conclusão: <input id="end_year" type="number" name="end_year" value="">
    Deixe em branco caso não tenha concluído
    <br>
    Descrição: <input type="text" id="description" name="description" value="">
    <br>
    <input type="submit" value="Atualizar">
</form>

<script>
    let url = new URL(window.location.href);
    let params = url.searchParams;
    url = '/atualizaFormacao?id=' + url.searchParams.get("id");

    fetch(url)
        .then((response) => {
            return response.json();
        })
        .then((data) => {
            let formations = data;

            formations.map(function (formation) {
                document.getElementById('id').value = formation.formation_id;
                document.getElementById('name').value = formation.name;
                document.getElementById('start_year').value = formation.start_year;
                document.getElementById('end_year').value = formation.end_year;
                document.getElementById('description').value = formation.description;
            });
            alert(response.json());
        })
        .catch(function (error) {
            console.log(error);
        });
</script>
</body>
</html>